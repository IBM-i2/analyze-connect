<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Adding a connector with a connector schema to an existing deployment </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Adding a connector with a connector schema to an existing deployment ">
    <meta name="generator" content="docfx 2.56.2.0">
    
    <link rel="shortcut icon" href="../../images/favicon.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <strong>i2 Connect gateway</strong>
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
          
          <div class="subnav navbar navbar-default">
            <div class="container hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
            <article class="content wrap" id="_content" data-uid="">
<h1 id="adding-a-connector-with-a-connector-schema-to-an-existing-deployment">Adding a connector with a connector schema to an existing deployment</h1>

<p>In this example scenario, a new connector with its own connector schema will be
added to an i2 Analyze deployment with an existing gateway schema. Item types in
the connector schema will be mapped to item types in the gateway schema where
possible.</p>
<blockquote><p><strong>Note:</strong> These instructions can also apply to mapping item types from one gateway
schema to another gateway schema.</p>
</blockquote>
<h2 id="setting-up-the-scenario">Setting up the scenario</h2>
<p>To follow this scenario, start by <a href="../example-connectors/connector-nypd.html">deploying i2 Analyze with the example NYPD connector</a> configured to use a gateway schema.</p>
<p>You should now be able to connect to the i2 Analyze server in Analyst&#39;s Notebook
Premium and use the services provided by the NYPD connector. For example, you
might use the &quot;Get All&quot; service and copy some of the results to a chart.</p>
<p><img src="images/nypd-records.png" alt="NYPD records"></p>
<h2 id="adding-the-new-connector">Adding the new connector</h2>
<p>Now, <a href="../example-connectors/connector-kcpd.html">add the example KCPD connector to the deployment</a>,
ensuring it is configured to use its own connector schema.</p>
<p>You should now also be able to use the services provided by the KCPD connector
and copy some results to the chart.</p>
<p><img src="images/nypd-kcpd-unmapped-records.png" alt="Unmapped NYPD and KCPD records"></p>
<p>But you can see that the gateway schema used by the NYPD connector and the
connector schema used by the KCPD connector have different item types to model
the same real-world object. This is evident by the different icons used and, in
the image shown, you can see pairs of the similar types highlighted in the same
color.</p>
<table>
<thead>
<tr>
<th><img src="images/nypd-kcpd-entity-types.png" alt="NYPD and KCPD item types"></th>
<th><img src="images/nypd-kcpd-link-types.png" alt="NYPD and KCPD link types"></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>By looking at all the available item types, you can see that both schemas have
their own:</p>
<ul>
<li>Person entity type</li>
<li>Location entity type</li>
<li>Complaint/Report entity type (these have different names, but they model the
same concept)</li>
<li>Located At link type</li>
<li>Suspect Of link type</li>
<li>Victim Of link type</li>
</ul>
<p>This duplication can be removed using item type mappings.</p>
<h2 id="configuring-item-type-mappings">Configuring item type mappings</h2>
<p>Go to the item type mapping configuration in the <a href="admin-cac.html">i2 Analyze Server Admin Console</a>
in a web browser to see the list of item types that can be mapped. You should
see the list of all item types in the KCPD-Crime schema, and that none of them
have been mapped.</p>
<p><img src="images/kcpd-types-unmapped.png" alt="Unmapped KCPD-Crime item types"></p>
<p>Where appropriate, KCPD-Crime item types can be mapped to similar item types in
the pre-existing NYPD-Complaints gateway schema.</p>
<h3 id="reports-and-complaints">Reports and Complaints</h3>
<p>The Report entity type in the KCPD-Crime schema can be mapped to the Complaint
entity type in the NYPD-Complaints schema.</p>
<ol>
<li>Select the <strong>Report (KCPD-Crime)</strong> item type in the list, then click <strong>Create
mapping</strong> in the right-hand pane. This shows the list of item types to which
the Report item type can be mapped.</li>
<li><p>Select the <strong>Complaint</strong> item type from the NYPD-Complaints schema, then
click <strong>Create mapping</strong>. You will then see all the properties of the
Complaint type in the NYPD-Complaints schema, with options available to
choose how they should be populated when mapping from a KCPD-Crime Report
record.</p>
<p><img src="images/kcpd-report-to-nypd-complaint-mapping-unconfigured.png" alt="KCPD Report to NYPD Complaint unconfigured mapping"></p>
</li>
<li><p>In the example below, the properties of the Report (KCPD-Crime) type are
mapped to the properties of the Complaint (NYPD-Complaints) according to the
following table.</p>
<table>
<thead>
<tr>
<th>Report (KCPD-Crime)</th>
<th>Complaint (NYPD-Complaints)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Report Number</td>
<td>Complaint Number</td>
</tr>
<tr>
<td>From Date</td>
<td>Complaint Start Date</td>
</tr>
<tr>
<td>To Date</td>
<td>Complaint End Date</td>
</tr>
<tr>
<td>From Time</td>
<td>Complaint Start Time</td>
</tr>
<tr>
<td>To Time</td>
<td>Complaint End Time</td>
</tr>
<tr>
<td>Offense Description</td>
<td>Offence Description</td>
</tr>
<tr>
<td>Offense</td>
<td>Classification Description</td>
</tr>
<tr>
<td>Report Date</td>
<td>Date Reported</td>
</tr>
</tbody>
</table>
<p><img src="images/kcpd-report-to-nypd-complaint-mapping.png" alt="KCPD Report to NYPD Complaint mapping"></p>
<p>There is no comparable property in the Report (KCPD-Crime) type for the
Complaint (NYPD-Complaints) properties:</p>
<ul>
<li>Crime Status</li>
<li>Jurisdiction Code</li>
<li>Jurisdiction Description</li>
<li>Offence Classification Code</li>
<li>Level Of Offence</li>
<li>Internal Classification Code</li>
<li>Location Of Occurrence</li>
</ul>
<p>So these are left unmapped. This means that they will not be populated for
the Complaints records that are mapped from Report records.</p>
</li>
<li><p>Once you are satisfied with all the property mappings, confirm the mapping by
clicking <strong>OK</strong>. You should see in the list of types that Report (KCPD-Crime)
has been mapped to Complaint (NYPD-Complaints).</p>
<p><img src="images/kcpd-report-to-nypd-complaint-in-list.png" alt="Updated list of types"></p>
</li>
</ol>
<h3 id="locations">Locations</h3>
<p>Following the same process, the Location type from the KCPD-Crime schema can be
mapped to the Location type in the NYPD-Complaints schema.</p>
<p>The Coordinates property of Location (KCPD-Crime) is automatically mapped to the
Coordinates property of Location (NYPD-Complaints). Below is an example
configuration you could use.</p>
<p><img src="images/kcpd-location-to-nypd-location-mapping.png" alt="KCPD location to NYPD location mapping"></p>
<p>You can see that the Borough Name property of mapped Locations will be populated by
the value of the City property from KCPD-Crime Location records. These
properties aren&#39;t an exact match with one another, but this can be used to make
it clear when Locations are in Kansas City, instead of New York City, in case
Coordinates are not provided.</p>
<p>You can go further and ensure the Borough Name property is always populated in
mapped Locations by setting a default value, which will be used if the source
KCPD-Crime Location record does not contain a value for the City property. To do
this:</p>
<ol>
<li><p>Click the button highlighted to the right of the Borough Name configuration
shown below.</p>
<p><img src="images/select-default-value-button.png" alt="Select default value button"></p>
</li>
<li><p>Enter a default value to use for the Borough Name property if a source
KCPD-Crime Location record has no City value, e.g. &quot;Kansas City&quot;.</p>
</li>
<li><p>Click <strong>OK</strong>.</p>
</li>
</ol>
<p>The mapping of Address to Premises Description does not seem like a perfect
match either. But, the Address of a Location might be too important not to have
and the Premises Description is a suitable target property in which to store it.</p>
<p>Again, once you are happy with the mapping configuration for Location records,
click <strong>OK</strong> to confirm the mapping.</p>
<h3 id="people">People</h3>
<p>Following the same process, you can map the Person (KCPD-Crime) type to the
Person (NYPD-Complaints) type.</p>
<p>The Race and Sex property mappings will be automatically-generated, so the only
property left is Age. Choose to map the value of the Age property from the
Person (KCPD-Crime) type as shown below.</p>
<p><img src="images/age-property-mapping.png" alt="Age property mapping"></p>
<p>The Age property of the source type and the target type are both SUGGESTED_FROM
properties, but they have different suggested values. The source property, from
the KCPD-Crime schema, has suggested values: <code>&lt;18</code>, <code>19</code>, <code>20</code>, <code>21</code>, ..., <code>64</code>,
and <code>65+</code>; whereas the target property, from the NYPD-Complaints schema, has
suggested values: <code>&lt;18</code>, <code>18-24</code>, <code>25-44</code>, <code>45-64</code>, and <code>65+</code>.</p>
<p>Notice how the <code>&lt;18</code> and <code>65+</code> values are automatically mapped to one another.
For the remaining target values (<code>18-24</code>, <code>25-44</code>, and <code>45-64</code>), you must choose
which source values should map to them.</p>
<p>You have the option to select a single value of the source property from the
dropdown, but that wouldn&#39;t make much sense. For example, the source
property values <code>18</code>, <code>19</code>, <code>20</code>, <code>21</code>, <code>22</code>, <code>23</code>, and <code>24</code> should <em>all</em> map to
the <code>18-24</code> target value. To do this, click the button to the right of the
dropdown menu beneath <em>18-24</em> highlighted below.</p>
<p><img src="images/age-property-mapping-select-values.png" alt="Select multiple possible values"></p>
<p>Then, select all the appropriate values as shown below and select a source
value to use when the conversion is applied in reverse during any seeded
searches.</p>
<p><img src="images/age-property-mapping-select-values-and-reverse.png" alt="Select multiple possible values and the reverse value"></p>
<h3 id="located-at">Located At</h3>
<p>The Located At (KCPD-Crime) link type can be mapped to the Located At
(NYPD-Complaints) link type by following the same process:</p>
<ol>
<li>Select <strong>Located At (KCPD-Crime)</strong> in the list of types, then click <strong>Create
mapping</strong> in the right-hand pane.</li>
<li>Select <strong>Located At</strong> from the NYPD-Complaints link types, then click
<strong>Create mapping</strong>.</li>
<li>There are no properties to map, so just add a description if you wish.</li>
<li>Confirm the mapping by clicking <strong>OK</strong>.</li>
</ol>
<h3 id="suspect-of">Suspect Of</h3>
<p>Map Suspect Of (KCPD-Crime) to Suspect Of (NYPD-Complaints) in the same way.</p>
<h3 id="victim-of">Victim Of</h3>
<p>Map Victim Of (KCPD-Crime) to Victim Of (NYPD-Complaints) in the same way.</p>
<h2 id="testing-the-item-type-mappings">Testing the item type mappings</h2>
<p>Once you have defined the item type mappings, you should see the updated list of
types like the example shown below.</p>
<p><img src="images/kcpd-to-nypd-mappings-configured.png" alt="Configured item type mappings"></p>
<p>The Arrested, Charged, and Complicit In links are left unmapped, because there
are no suitable target link types in the existing NYPD-Complaints schema. i2
Analyze will recognize that their end types have been mapped and allow the
NYPD-Complaints schema&#39;s Person and Complaint types to be connected by these
links.</p>
<p>To test the item type mappings by previewing the external searches provided by
the NYPD and KCPD connectors:</p>
<ol>
<li>Click <strong>Apply</strong> in the top-right. This applies the mappings to the test
environment that is available only through the Admin Console. It does not
apply the mappings to the live server.</li>
<li>Click <strong>Preview services</strong> to open a preview of how the services would behave
with the mappings you have configured. Notice how the KCPD Connector&#39;s Get
All service now returns item types from the NYPD-Complaints schema.</li>
<li>Go back and make any changes to the mappings, repeating steps 1 and 2 until
you are satisfied with the configuration.</li>
</ol>
<h2 id="applying-the-item-type-mappings-to-the-i2-analyze-server">Applying the item type mappings to the i2 Analyze server</h2>
<p>To apply the mapping configuration you have created on the i2 Analyze server for
all users, see
<a href="item-type-mapping-config.html#applying-the-mapping-to-the-server">Applying the mapping configuration to the i2 Analyze server</a>.</p>
<h2 id="the-result">The result</h2>
<p>In Analyst&#39;s Notebook Premium, use some of the services provided by the two
connectors and copy some results from each connector to your chart. Notice how
there are now no duplicate item types.</p>
<p>For example, compare the chart below to the one at the very beginning of this
walkthrough in <a href="#adding-the-new-connector">Adding the new connector</a>. You can see that all of the records have types from the
NYPD-Complaints schema, except for the unmapped Arrested and Charged links in
the top-right corner.</p>
<p><img src="images/nypd-kcpd-mapped-records.png" alt="NYPD and KCPD mapped records"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            &copy; N. Harris Computer Corporation (2022).
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
